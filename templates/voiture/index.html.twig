{% extends 'base.html.twig' %}

{% block title %}Voitures{% endblock %}

{% block body %}
<div class="page-container">
    {# Header #}
    <div class="flex flex-col md:flex-row md:items-center md:justify-between mb-8">
        <div>
            <h1 class="text-4xl font-bold mb-2 flex items-center">
                <i class="fa-solid fa-car text-primary-600 dark:text-primary-400 mr-3"></i>
                Catalogue de voitures
            </h1>
            <p class="text-gray-600 dark:text-gray-400">Trouvez la voiture qui correspond à vos besoins</p>
        </div>
        <div class="flex space-x-3 mt-4 md:mt-0">
            <a href="{{ path('index') }}" class="btn btn-secondary">
                <i class="fa-solid fa-arrow-left mr-2"></i>
                Retour
            </a>
            <a href="{{ path('voiture_new') }}" class="btn btn-accent">
                <i class="fa-solid fa-plus mr-2"></i>
                Ajouter une voiture
            </a>
        </div>
    </div>

    {# Filters Section #}
    <div class="card mb-8">
        <h2 class="text-xl font-semibold mb-4 flex items-center">
            <i class="fa-solid fa-filter text-primary-600 dark:text-primary-400 mr-2"></i>
            Filtres de recherche
        </h2>
        
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
            {# Energie Filter #}
            <div>
                <label for="energieAjax" class="form-label">
                    <i class="fa-solid fa-bolt mr-1"></i>
                    Énergie
                </label>
                <select class="form-select" name="energieAjax" id="energieAjax">
                    <option value="">Toutes les énergies</option>
                    {% for energie in energies %}
                        <option value="{{ energie.id }}">{{ energie.nom }}</option>
                    {% endfor %}
                </select>
            </div>

            {# Marque Filter #}
            <div>
                <label for="marqueAjax" class="form-label">
                    <i class="fa-solid fa-tag mr-1"></i>
                    Marque
                </label>
                <select class="form-select" name="marqueAjax" id="marqueAjax">
                    <option value="">Toutes les marques</option>
                    {% for marque in marques %}
                        <option value="{{ marque.id }}">{{ marque.nom }}</option>
                    {% endfor %}
                </select>
            </div>

            {# Sort Filter #}
            <div>
                <label for="trie" class="form-label">
                    <i class="fa-solid fa-sort mr-1"></i>
                    Trier par
                </label>
                <select class="form-select" name="trie" id="trie">
                    <option value="">Sélectionner un tri</option>
                    <option value="alphabet">Alphabétique</option>
                    <option value="prixASC">Prix croissant</option>
                    <option value="prixDESC">Prix décroissant</option>
                </select>
            </div>

            {# State Filter #}
            <div class="flex items-end">
                <label class="flex items-center space-x-2 cursor-pointer">
                    <input type="checkbox" name="etatSelector" id="etatSelector" 
                           class="rounded border-gray-300 text-primary-600 focus:ring-primary-500">
                    <span class="text-sm font-medium text-gray-700 dark:text-gray-300">
                        Voitures neuves uniquement
                    </span>
                </label>
            </div>
        </div>

        {# Price Range Filter #}
        <div class="mt-4 pt-4 border-t border-gray-200 dark:border-gray-700">
            <label for="prixAjax" class="form-label">
                <i class="fa-solid fa-euro-sign mr-1"></i>
                Prix maximum : <span id="rangeValue" class="font-bold text-primary-600 dark:text-primary-400">0</span> €
            </label>
            <input type="range" id="prixAjax" name="prixAjax" 
                   min="0" max="{{ prixMax }}" step="500" value="0"
                   class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700"> 
            <div class="flex justify-between text-xs text-gray-500 dark:text-gray-400 mt-1">
                <span>0 €</span>
                <span>{{ prixMax }} €</span>
            </div>
        </div>
    </div>

    {# Results Table #}
    <div class="card overflow-hidden p-0">
        <div class="overflow-x-auto">
            <table class="table-modern" id="voiture_index">
                <thead>
                    <tr>
                        <th>Nom</th>
                        <th>Prix</th>
                        <th>Énergie</th>
                        <th>Marque</th>
                        <th>État</th>
                        <th>Année</th>
                        <th>Consommation</th>
                        <th>Kilométrage</th>
                        <th>Mise à jour</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody id="voiture_index_body">
                    {% include "voiture/_index_body.html.twig" %}
                </tbody>
            </table>
        </div>
    </div>
</div>
{% endblock %}
